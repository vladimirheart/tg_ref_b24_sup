spring:
  application:
    name: panel

  jpa:
    hibernate:
      ddl-auto: none      # правильно, пускай Flyway рулит схемой
    properties:
      hibernate:
        format_sql: true
        temp:
          use_jdbc_metadata_defaults: false

  flyway:
    locations:
      - classpath:db/migration/sqlite
    baseline-on-migrate: true
    baseline-version: 0
    placeholders:
      autoIncrement: AUTOINCREMENT

  sql:
    init:
      mode: ${SQL_INIT_MODE:never}

  main:
    banner-mode: off

  session:
    store-type: jdbc
    jdbc:
      table-name: SPRING_SESSION   # только имя таблицы, без initialize-schema / schema

app:
  datasource:
    sqlite:
      path: ${APP_DB_TICKETS:tickets.db}
    users-sqlite:
      path: ${APP_DB_USERS:users.db}
    bot-sqlite:
      path: ${APP_DB_BOT:bot_database.db}
    clients-sqlite:
      path: ${APP_DB_CLIENTS:clients.db}
    knowledge-sqlite:
      path: ${APP_DB_KNOWLEDGE:knowledge_base.db}
    objects-sqlite:
      path: ${APP_DB_OBJECTS:objects.db}
    settings-sqlite:
      path: ${APP_DB_SETTINGS:settings.db}
  bots:
    database-dir: ${APP_BOT_DATABASE_DIR:../bot_databases}
  storage:
    attachments: ${APP_STORAGE_ATTACHMENTS:../attachments}
    knowledge-base: ${APP_STORAGE_KNOWLEDGE_BASE:${APP_STORAGE_ATTACHMENTS:../attachments}/knowledge_base}
    avatars: ${APP_STORAGE_AVATARS:${APP_STORAGE_ATTACHMENTS:../attachments}/avatars}

server:
  port: ${APP_HTTP_PORT:8080}
  error:
    whitelabel:
      enabled: false

logging:
  level:
    # Suppress noisy stack traces when HTTPS traffic accidentally hits the HTTP port
    org.apache.coyote.http11.Http11Processor: WARN

